/* ── Crack PTE - Premium Dark Theme + Effects ── */

* { margin:0; padding:0; box-sizing:border-box; }

:root {
  --bg-primary: #0a0d14;
  --bg-secondary: #111827;
  --bg-card: #1a1f2e;
  --bg-card-hover: #222838;
  --bg-input: #1e2433;
  --border: #1f2937;
  --border-light: #2d3748;
  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --text-muted: #64748b;
  --accent: #6366f1;
  --accent-light: #818cf8;
  --accent-glow: rgba(99,102,241,0.35);
  --cyan: #22d3ee;
  --emerald: #10b981;
  --amber: #f59e0b;
  --rose: #f43f5e;
  --purple: #a855f7;
  --xp-bar: linear-gradient(90deg, #6366f1, #a855f7, #ec4899);
  --transition-smooth: cubic-bezier(0.16, 1, 0.3, 1);
}

html { scroll-behavior:smooth; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

body {
  font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  min-height:100vh;
  overflow-x:hidden;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:#2d3748; border-radius:10px; }
::-webkit-scrollbar-thumb:hover { background:#4a5568; }
::selection { background:rgba(99,102,241,0.4); color:#fff; }

/* ══════════════════════════════════════════════════
   ANIMATIONS
   ══════════════════════════════════════════════════ */

@keyframes fadeIn { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeInUp { from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeInDown { from{opacity:0;transform:translateY(-20px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeInLeft { from{opacity:0;transform:translateX(-30px)} to{opacity:1;transform:translateX(0)} }
@keyframes fadeInRight { from{opacity:0;transform:translateX(30px)} to{opacity:1;transform:translateX(0)} }
@keyframes fadeInScale { from{opacity:0;transform:scale(0.9)} to{opacity:1;transform:scale(1)} }
@keyframes slideDown { from{opacity:0;transform:translateY(-12px)} to{opacity:1;transform:translateY(0)} }
@keyframes scoreReveal { from{stroke-dashoffset:326.73} }
@keyframes barGrow { from{width:0} }
@keyframes shimmer { 0%{background-position:-200% 0} 100%{background-position:200% 0} }
@keyframes float { 0%,100%{transform:translateY(0)} 50%{transform:translateY(-8px)} }
@keyframes floatSlow { 0%,100%{transform:translateY(0) rotate(0deg)} 50%{transform:translateY(-15px) rotate(2deg)} }
@keyframes xpPulse { 0%{transform:scale(1)} 50%{transform:scale(1.15)} 100%{transform:scale(1)} }
@keyframes confetti { 0%{transform:translateY(0) rotate(0)} 100%{transform:translateY(-50px) rotate(360deg);opacity:0} }
@keyframes levelUp { 0%{transform:scale(0.5);opacity:0} 50%{transform:scale(1.2);opacity:1} 100%{transform:scale(1);opacity:1} }
@keyframes wordPulse { 0%{transform:scale(1)} 50%{transform:scale(1.08)} 100%{transform:scale(1)} }
@keyframes pulseRing { 0%{transform:scale(0.8);opacity:1} 100%{transform:scale(2.5);opacity:0} }
@keyframes gradientShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
@keyframes orbFloat1 { 0%{transform:translate(0,0) scale(1)} 33%{transform:translate(30px,-50px) scale(1.1)} 66%{transform:translate(-20px,20px) scale(0.9)} 100%{transform:translate(0,0) scale(1)} }
@keyframes orbFloat2 { 0%{transform:translate(0,0) scale(1)} 33%{transform:translate(-40px,30px) scale(0.9)} 66%{transform:translate(25px,-35px) scale(1.1)} 100%{transform:translate(0,0) scale(1)} }
@keyframes orbFloat3 { 0%{transform:translate(0,0)} 50%{transform:translate(50px,30px)} 100%{transform:translate(0,0)} }
@keyframes borderGlow { 0%,100%{border-color:rgba(99,102,241,0.3)} 50%{border-color:rgba(99,102,241,0.6)} }
@keyframes textGradient { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

@keyframes glow {
  0%,100%{box-shadow:0 0 5px var(--accent-glow), 0 4px 15px rgba(0,0,0,0.3)}
  50%{box-shadow:0 0 20px var(--accent-glow), 0 0 50px rgba(99,102,241,0.15), 0 4px 15px rgba(0,0,0,0.3)}
}

@keyframes ripple {
  to { transform:scale(4); opacity:0; }
}

.animate-fadeIn { animation:fadeIn 0.5s ease-out; }
.animate-fadeInUp { animation:fadeInUp 0.6s ease-out; }
.animate-fadeInDown { animation:fadeInDown 0.5s ease-out; }
.animate-fadeInScale { animation:fadeInScale 0.5s var(--transition-smooth); }
.animate-slideDown { animation:slideDown 0.4s ease-out; }
.animate-glow { animation:glow 2.5s infinite; }
.animate-float { animation:float 3s ease-in-out infinite; }
.animate-floatSlow { animation:floatSlow 6s ease-in-out infinite; }
.animate-shimmer { background:linear-gradient(90deg,transparent,rgba(255,255,255,0.04),transparent); background-size:200% 100%; animation:shimmer 2.5s infinite; }
.animate-borderGlow { animation:borderGlow 3s ease-in-out infinite; }

.score-circle-animate { animation:scoreReveal 1.5s ease-out forwards; }
.score-bar-animate { animation:barGrow 1s ease-out forwards; }
.word-speaking { animation:wordPulse 0.6s ease-in-out; box-shadow:0 0 0 3px var(--accent-glow); }

/* ── Staggered entrance for grid children ── */
.stagger > * { opacity:0; animation:fadeInUp 0.5s var(--transition-smooth) forwards; }
.stagger > *:nth-child(1) { animation-delay:0.05s; }
.stagger > *:nth-child(2) { animation-delay:0.1s; }
.stagger > *:nth-child(3) { animation-delay:0.15s; }
.stagger > *:nth-child(4) { animation-delay:0.2s; }
.stagger > *:nth-child(5) { animation-delay:0.25s; }
.stagger > *:nth-child(6) { animation-delay:0.3s; }
.stagger > *:nth-child(7) { animation-delay:0.35s; }
.stagger > *:nth-child(8) { animation-delay:0.4s; }

/* ── Scroll Reveal ── */
.reveal { opacity:0; transform:translateY(30px); transition:opacity 0.7s var(--transition-smooth), transform 0.7s var(--transition-smooth); }
.reveal.visible { opacity:1; transform:translateY(0); }
.reveal-left { opacity:0; transform:translateX(-40px); transition:opacity 0.7s var(--transition-smooth), transform 0.7s var(--transition-smooth); }
.reveal-left.visible { opacity:1; transform:translateX(0); }
.reveal-right { opacity:0; transform:translateX(40px); transition:opacity 0.7s var(--transition-smooth), transform 0.7s var(--transition-smooth); }
.reveal-right.visible { opacity:1; transform:translateX(0); }
.reveal-scale { opacity:0; transform:scale(0.85); transition:opacity 0.7s var(--transition-smooth), transform 0.7s var(--transition-smooth); }
.reveal-scale.visible { opacity:1; transform:scale(1); }

/* ══════════════════════════════════════════════════
   GLASSMORPHISM & CARDS
   ══════════════════════════════════════════════════ */

.glass {
  background:rgba(17,24,39,0.7);
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
  border:1px solid rgba(255,255,255,0.06);
}

.glass-hover {
  transition:all 0.4s var(--transition-smooth);
}
.glass-hover:hover {
  background:rgba(30,41,59,0.8);
  border-color:rgba(255,255,255,0.1);
  transform:translateY(-4px);
  box-shadow:0 20px 40px rgba(0,0,0,0.4), 0 0 0 1px rgba(255,255,255,0.05);
}

.glass-premium {
  background:linear-gradient(135deg, rgba(17,24,39,0.8), rgba(30,41,59,0.6));
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border:1px solid rgba(255,255,255,0.08);
  box-shadow:0 8px 32px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05);
}

/* ── Neon accents ── */
.neon-border {
  border:1px solid rgba(99,102,241,0.25);
  box-shadow:0 0 20px rgba(99,102,241,0.08), 0 8px 32px rgba(0,0,0,0.2);
}
.neon-text { text-shadow:0 0 20px rgba(99,102,241,0.5), 0 0 40px rgba(99,102,241,0.2); }

/* ── Animated gradient text ── */
.gradient-text {
  background:linear-gradient(135deg, #6366f1, #a855f7, #ec4899, #6366f1);
  background-size:300% 300%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:textGradient 4s ease infinite;
}

/* ══════════════════════════════════════════════════
   ANIMATED BACKGROUND ORBS
   ══════════════════════════════════════════════════ */

.bg-orbs { position:relative; overflow:hidden; }
.bg-orbs::before, .bg-orbs::after {
  content:'';
  position:absolute;
  border-radius:50%;
  filter:blur(80px);
  pointer-events:none;
  z-index:0;
}
.bg-orbs::before {
  width:400px; height:400px;
  background:radial-gradient(circle, rgba(99,102,241,0.15), transparent 70%);
  top:-100px; left:-100px;
  animation:orbFloat1 20s ease-in-out infinite;
}
.bg-orbs::after {
  width:350px; height:350px;
  background:radial-gradient(circle, rgba(168,85,247,0.12), transparent 70%);
  bottom:-80px; right:-80px;
  animation:orbFloat2 25s ease-in-out infinite;
}

/* Extra orb via child */
.bg-orb-extra {
  position:absolute;
  width:300px; height:300px;
  border-radius:50%;
  background:radial-gradient(circle, rgba(34,211,238,0.08), transparent 70%);
  filter:blur(60px);
  pointer-events:none;
  z-index:0;
  top:50%; left:50%;
  animation:orbFloat3 30s ease-in-out infinite;
}

/* ══════════════════════════════════════════════════
   PARTICLE CANVAS
   ══════════════════════════════════════════════════ */

#particles-canvas {
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  pointer-events:none;
  z-index:0;
  opacity:0.6;
}

/* ══════════════════════════════════════════════════
   RIPPLE EFFECT
   ══════════════════════════════════════════════════ */

.ripple {
  position:relative;
  overflow:hidden;
}
.ripple-wave {
  position:absolute;
  border-radius:50%;
  background:rgba(255,255,255,0.15);
  transform:scale(0);
  animation:ripple 0.6s linear;
  pointer-events:none;
}

/* ══════════════════════════════════════════════════
   XP & BADGES
   ══════════════════════════════════════════════════ */

.xp-bar-bg { background:rgba(30,41,59,0.8); border-radius:9999px; height:8px; overflow:hidden; border:1px solid rgba(255,255,255,0.05); }
.xp-bar-fill { background:var(--xp-bar); height:100%; border-radius:9999px; transition:width 1s ease-out; position:relative; }
.xp-bar-fill::after { content:''; position:absolute; inset:0; background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent); animation:shimmer 2s infinite; background-size:200% 100%; }

.badge { display:inline-flex; align-items:center; gap:4px; padding:3px 12px; border-radius:9999px; font-size:0.7rem; font-weight:700; backdrop-filter:blur(4px); }
.badge-xp { background:rgba(99,102,241,0.15); color:#818cf8; border:1px solid rgba(99,102,241,0.25); }
.badge-streak { background:rgba(245,158,11,0.15); color:#fbbf24; border:1px solid rgba(245,158,11,0.25); }
.badge-level { background:rgba(168,85,247,0.15); color:#c084fc; border:1px solid rgba(168,85,247,0.25); }

/* ── Audio player dark ── */
audio { border-radius:12px; }
audio::-webkit-media-controls-panel { background:var(--bg-card); }

/* ══════════════════════════════════════════════════
   INTERACTIVE CARDS
   ══════════════════════════════════════════════════ */

.card-3d {
  transition:transform 0.4s var(--transition-smooth), box-shadow 0.4s var(--transition-smooth);
  transform-style:preserve-3d;
  perspective:1000px;
}
.card-3d:hover {
  transform:translateY(-6px) rotateX(2deg);
  box-shadow:0 25px 50px rgba(0,0,0,0.4);
}

.card-shine {
  position:relative;
  overflow:hidden;
}
.card-shine::before {
  content:'';
  position:absolute;
  top:-50%; left:-50%;
  width:200%; height:200%;
  background:linear-gradient(135deg, transparent 40%, rgba(255,255,255,0.03) 50%, transparent 60%);
  transition:transform 0.6s;
  transform:translateX(-100%);
  pointer-events:none;
  z-index:1;
}
.card-shine:hover::before {
  transform:translateX(100%);
}

/* ══════════════════════════════════════════════════
   BUTTONS
   ══════════════════════════════════════════════════ */

.btn-primary {
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:14px 28px;
  background:linear-gradient(135deg, #6366f1, #7c3aed);
  color:#fff; font-weight:700; border-radius:14px;
  transition:all 0.3s var(--transition-smooth);
  box-shadow:0 4px 15px rgba(99,102,241,0.3), 0 1px 3px rgba(0,0,0,0.2);
  position:relative; overflow:hidden;
}
.btn-primary:hover {
  transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(99,102,241,0.4), 0 2px 6px rgba(0,0,0,0.3);
}
.btn-primary:active { transform:translateY(0); }

.btn-glass {
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:14px 28px;
  background:rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.1);
  color:#fff; font-weight:700; border-radius:14px;
  transition:all 0.3s var(--transition-smooth);
  backdrop-filter:blur(8px);
}
.btn-glass:hover {
  background:rgba(255,255,255,0.1);
  border-color:rgba(255,255,255,0.2);
  transform:translateY(-2px);
}

/* ══════════════════════════════════════════════════
   MOBILE BOTTOM NAVIGATION
   ══════════════════════════════════════════════════ */

.mobile-bottom-nav {
  position:fixed;
  bottom:0; left:0; right:0;
  z-index:100;
  background:rgba(10,13,20,0.92);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border-top:1px solid rgba(255,255,255,0.06);
  padding:6px 8px;
  padding-bottom:max(6px, env(safe-area-inset-bottom));
  display:none;
}

.mobile-bottom-nav a {
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:2px;
  padding:6px 4px;
  border-radius:12px;
  transition:all 0.2s;
  flex:1;
  text-decoration:none;
  -webkit-tap-highlight-color:transparent;
}
.mobile-bottom-nav a svg { width:22px; height:22px; }
.mobile-bottom-nav a span { font-size:0.6rem; font-weight:600; }
.mobile-bottom-nav a.active { color:#818cf8; background:rgba(99,102,241,0.1); }
.mobile-bottom-nav a:not(.active) { color:#64748b; }
.mobile-bottom-nav a:not(.active):active { color:#94a3b8; transform:scale(0.92); }

@media (max-width:768px) {
  .mobile-bottom-nav { display:flex; }
  body { padding-bottom:72px; }
  /* Hide desktop nav on mobile when bottom nav is shown */
  nav.glass { position:sticky; }
}

/* ══════════════════════════════════════════════════
   PARALLAX
   ══════════════════════════════════════════════════ */

.parallax-bg {
  will-change:transform;
  transition:transform 0.1s linear;
}

/* ══════════════════════════════════════════════════
   DARK MODE FORM INPUTS
   ══════════════════════════════════════════════════ */

.input-dark {
  width:100%;
  padding:12px 16px;
  background:rgba(15,23,42,0.6);
  border:1px solid rgba(255,255,255,0.08);
  border-radius:12px;
  color:var(--text-primary);
  font-size:0.875rem;
  transition:all 0.3s;
  outline:none;
}
.input-dark::placeholder { color:var(--text-muted); }
.input-dark:focus {
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(99,102,241,0.15);
  background:rgba(15,23,42,0.8);
}

select.input-dark {
  appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2394a3b8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:right 12px center;
  padding-right:36px;
}

/* ══════════════════════════════════════════════════
   UTILITY
   ══════════════════════════════════════════════════ */

.line-clamp-2 { display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.tabular-nums { font-variant-numeric:tabular-nums; }

*:focus-visible { outline:2px solid var(--accent); outline-offset:2px; border-radius:4px; }

#practice-area, #score-area, #app-root > * { animation:fadeIn 0.35s ease-out; }

/* ── Smooth page transitions ── */
#app-root { min-height:100vh; position:relative; z-index:1; }

/* ══════════════════════════════════════════════════
   RESPONSIVE & MOBILE
   ══════════════════════════════════════════════════ */

@media (max-width:640px) {
  .text-4xl{font-size:1.75rem} .text-6xl{font-size:2.25rem} .text-3xl{font-size:1.5rem}
  .py-20{padding-top:2.5rem;padding-bottom:2.5rem} .py-28{padding-top:3rem;padding-bottom:3rem}
  .p-6{padding:1rem} .p-8{padding:1.25rem}
  #action-buttons{flex-direction:column}
  #action-buttons button,#action-buttons a{width:100%;justify-content:center}
  button,a,select{min-height:44px}
  .max-w-lg{max-width:100%}
  
  /* Better touch targets */
  .glass-hover:active { transform:scale(0.98); }
  
  /* Reduce orb sizes on mobile */
  .bg-orbs::before { width:250px; height:250px; }
  .bg-orbs::after { width:200px; height:200px; }
}

html,body { overflow-x:hidden; max-width:100vw; }

@supports not (backdrop-filter:blur(16px)) {
  .glass,.glass-premium,.backdrop-blur-lg { background:rgba(17,24,39,0.95)!important; }
  .mobile-bottom-nav { background:rgba(10,13,20,0.98)!important; }
}

@media print { nav,#action-buttons,button,audio,canvas,details,.mobile-bottom-nav{display:none!important} }

/* ── Smooth touch scrolling ── */
@supports (-webkit-overflow-scrolling: touch) {
  .overflow-y-auto { -webkit-overflow-scrolling:touch; }
}
