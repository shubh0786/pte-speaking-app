/* ── Crack PTE — Redesigned Design System ── */
/* Inspired by Linear, Vercel, Brilliant */

* { margin:0; padding:0; box-sizing:border-box; }

:root {
  --bg: #09090b;
  --surface-1: #0c0c0f;
  --surface-2: #141418;
  --surface-3: #1c1c22;
  --border: rgba(255,255,255,0.07);
  --border-hover: rgba(255,255,255,0.12);
  --border-active: rgba(255,255,255,0.18);
  --text-primary: #fafafa;
  --text-secondary: #a1a1aa;
  --text-muted: #71717a;
  --text-faint: #52525b;
  --accent: #6d5cff;
  --accent-light: #8b7dff;
  --accent-glow: rgba(109,92,255,0.25);
  --accent-surface: rgba(109,92,255,0.08);
  --success: #22c55e;
  --warning: #eab308;
  --error: #ef4444;
  --info: #3b82f6;
  --amber: #f59e0b;
  --violet: #a78bfa;
  --pink: #f472b6;
  --xp-bar: linear-gradient(90deg, #6d5cff, #a78bfa);
  --ease: cubic-bezier(0.16, 1, 0.3, 1);
  --radius-sm: 6px;
  --radius: 8px;
  --radius-lg: 10px;
  --radius-xl: 14px;
}

html { scroll-behavior:smooth; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }

body {
  font-family:'Geist', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background:var(--bg);
  color:var(--text-primary);
  min-height:100vh;
  overflow-x:hidden;
  line-height:1.5;
  letter-spacing:-0.01em;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-track { background:transparent; }
::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.08); border-radius:10px; }
::-webkit-scrollbar-thumb:hover { background:rgba(255,255,255,0.14); }
::selection { background:rgba(109,92,255,0.3); color:#fff; }

/* ══════════════════════════════════════
   ANIMATIONS (refined, minimal)
   ══════════════════════════════════════ */

@keyframes fadeIn { from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:translateY(0)} }
@keyframes fadeInUp { from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:translateY(0)} }
@keyframes slideDown { from{opacity:0;transform:translateY(-8px)} to{opacity:1;transform:translateY(0)} }
@keyframes scoreReveal { from{stroke-dashoffset:326.73} }
@keyframes barGrow { from{width:0} }
@keyframes shimmer { 0%{background-position:-200% 0} 100%{background-position:200% 0} }
@keyframes pulseRing { 0%{transform:scale(0.8);opacity:1} 100%{transform:scale(2);opacity:0} }
@keyframes xpPulse { 0%{transform:scale(1)} 50%{transform:scale(1.1)} 100%{transform:scale(1)} }
@keyframes levelUp { 0%{transform:scale(0.5);opacity:0} 50%{transform:scale(1.1);opacity:1} 100%{transform:scale(1);opacity:1} }

@keyframes ripple { to { transform:scale(4); opacity:0; } }

.animate-fadeIn { animation:fadeIn 0.2s ease-out; }
.animate-fadeInUp { animation:fadeInUp 0.3s ease-out; }
.animate-slideDown { animation:slideDown 0.25s ease-out; }
.animate-shimmer { background:linear-gradient(90deg,transparent,rgba(255,255,255,0.03),transparent); background-size:200% 100%; animation:shimmer 2s infinite; }

.score-circle-animate { animation:scoreReveal 1s ease-out forwards; }
.score-bar-animate { animation:barGrow 0.8s ease-out forwards; }

/* Staggered entrance */
.stagger > * { opacity:0; animation:fadeInUp 0.3s ease-out forwards; }
.stagger > *:nth-child(1) { animation-delay:0.03s; }
.stagger > *:nth-child(2) { animation-delay:0.06s; }
.stagger > *:nth-child(3) { animation-delay:0.09s; }
.stagger > *:nth-child(4) { animation-delay:0.12s; }
.stagger > *:nth-child(5) { animation-delay:0.15s; }
.stagger > *:nth-child(6) { animation-delay:0.18s; }
.stagger > *:nth-child(7) { animation-delay:0.21s; }
.stagger > *:nth-child(8) { animation-delay:0.24s; }

/* Scroll Reveal */
.reveal { opacity:0; transform:translateY(15px); transition:opacity 0.4s ease, transform 0.4s ease; }
.reveal.visible { opacity:1; transform:translateY(0); }

/* ══════════════════════════════════════
   CARDS & SURFACES
   ══════════════════════════════════════ */

.card {
  background:var(--surface-1);
  border:1px solid var(--border);
  border-radius:var(--radius-lg);
  transition:border-color 0.15s, transform 0.15s, box-shadow 0.15s;
}

.card-hover:hover {
  border-color:var(--border-hover);
  transform:translateY(-1px);
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
}

.card-elevated {
  background:var(--surface-2);
  border:1px solid var(--border);
  border-radius:var(--radius-xl);
}

/* Legacy glass class — maps to new card */
.glass { background:var(--surface-1); border:1px solid var(--border); }
.glass-hover { transition:border-color 0.15s, transform 0.15s; }
.glass-hover:hover { border-color:var(--border-hover); transform:translateY(-1px); }
.glass-premium { background:var(--surface-2); border:1px solid var(--border); }

/* Accent border */
.accent-border { border:1px solid rgba(109,92,255,0.2); }
.neon-border { border:1px solid rgba(109,92,255,0.15); }

/* ══════════════════════════════════════
   BUTTONS
   ══════════════════════════════════════ */

.btn-primary {
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 20px;
  background:var(--accent);
  color:#fff; font-weight:600; font-size:0.875rem;
  border-radius:var(--radius);
  transition:all 0.15s;
  border:none; cursor:pointer;
}
.btn-primary:hover { background:var(--accent-light); transform:translateY(-1px); }
.btn-primary:active { transform:translateY(0); }

.btn-secondary {
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 20px;
  background:transparent;
  border:1px solid var(--border);
  color:var(--text-secondary); font-weight:600; font-size:0.875rem;
  border-radius:var(--radius);
  transition:all 0.15s;
  cursor:pointer;
}
.btn-secondary:hover { border-color:var(--border-hover); color:var(--text-primary); background:var(--surface-2); }

.btn-danger {
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 20px;
  background:var(--error);
  color:#fff; font-weight:600; font-size:0.875rem;
  border-radius:var(--radius);
  transition:all 0.15s;
  border:none; cursor:pointer;
}
.btn-danger:hover { opacity:0.9; }

/* Legacy button classes */
.btn-glass { 
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:10px 20px; background:var(--surface-2); border:1px solid var(--border);
  color:var(--text-secondary); font-weight:600; border-radius:var(--radius); transition:all 0.15s;
}
.btn-glass:hover { border-color:var(--border-hover); color:var(--text-primary); }

/* ══════════════════════════════════════
   XP & BADGES
   ══════════════════════════════════════ */

.xp-bar-bg { background:var(--surface-3); border-radius:9999px; height:6px; overflow:hidden; }
.xp-bar-fill { background:var(--xp-bar); height:100%; border-radius:9999px; transition:width 0.8s ease-out; }

.badge { display:inline-flex; align-items:center; gap:4px; padding:2px 10px; border-radius:9999px; font-size:0.675rem; font-weight:600; }
.badge-xp { background:rgba(109,92,255,0.1); color:var(--accent-light); border:1px solid rgba(109,92,255,0.15); }
.badge-streak { background:rgba(245,158,11,0.1); color:var(--amber); border:1px solid rgba(245,158,11,0.15); }
.badge-level { background:rgba(167,139,250,0.1); color:var(--violet); border:1px solid rgba(167,139,250,0.15); }

/* ══════════════════════════════════════
   MOBILE BOTTOM NAVIGATION
   ══════════════════════════════════════ */

.mobile-bottom-nav {
  position:fixed;
  bottom:0; left:0; right:0;
  z-index:100;
  background:var(--bg);
  border-top:1px solid var(--border);
  padding:6px 8px;
  padding-bottom:max(6px, env(safe-area-inset-bottom));
  display:none;
}

.mobile-bottom-nav a {
  display:flex; flex-direction:column; align-items:center;
  gap:2px; padding:6px 4px; border-radius:var(--radius);
  transition:all 0.15s; flex:1; text-decoration:none;
  -webkit-tap-highlight-color:transparent;
}
.mobile-bottom-nav a svg { width:22px; height:22px; }
.mobile-bottom-nav a span { font-size:0.65rem; font-weight:600; }
.mobile-bottom-nav a.active { color:var(--accent-light); background:var(--accent-surface); }
.mobile-bottom-nav a:not(.active) { color:var(--text-muted); }
.mobile-bottom-nav a:not(.active):active { color:var(--text-secondary); transform:scale(0.95); }

@media (max-width:768px) {
  .mobile-bottom-nav { display:flex; }
  body { padding-bottom:72px; }
}

/* ══════════════════════════════════════
   FORM INPUTS
   ══════════════════════════════════════ */

.input-dark {
  width:100%;
  padding:12px 16px;
  background:var(--surface-1);
  border:1px solid var(--border);
  border-radius:var(--radius);
  color:var(--text-primary);
  font-size:0.875rem;
  transition:border-color 0.15s;
  outline:none;
  min-height:44px;
}
.input-dark::placeholder { color:var(--text-faint); }
.input-dark:focus { border-color:var(--accent); }

select.input-dark {
  appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2371717a' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:right 12px center;
  padding-right:36px;
}

/* ══════════════════════════════════════
   PRACTICE FLOW STEPPER
   ══════════════════════════════════════ */

.practice-stepper { display:flex; align-items:center; justify-content:center; gap:0; padding:12px 0; }
.practice-stepper .step { display:flex; align-items:center; }
.practice-stepper .step-dot {
  width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center;
  font-size:0.65rem; font-weight:600; font-family:'Geist Mono',monospace;
  border:1.5px solid var(--border); background:var(--surface-1); color:var(--text-muted);
  transition:all 0.3s; position:relative; z-index:1;
}
.practice-stepper .step-dot.active { border-color:var(--accent); background:var(--accent); color:#fff; }
.practice-stepper .step-dot.done { border-color:var(--success); background:rgba(34,197,94,0.1); color:var(--success); }
.practice-stepper .step-line { width:32px; height:1.5px; background:var(--border); transition:background 0.3s; }
.practice-stepper .step-line.done { background:var(--success); }
.practice-stepper .step-label { font-size:0.6rem; font-weight:500; margin-top:4px; text-align:center; color:var(--text-faint); white-space:nowrap; }
.practice-stepper .step-label.active { color:var(--accent-light); }
.practice-stepper .step-label.done { color:var(--success); }

/* ══════════════════════════════════════
   SKELETON LOADERS
   ══════════════════════════════════════ */

.skeleton {
  background:linear-gradient(90deg, var(--surface-2) 25%, var(--surface-3) 50%, var(--surface-2) 75%);
  background-size:200% 100%;
  animation:shimmer 1.5s infinite;
  border-radius:var(--radius-sm);
}
.skeleton-text { height:12px; margin-bottom:8px; }
.skeleton-text:last-child { width:60%; }
.skeleton-circle { border-radius:50%; }
.skeleton-card { background:var(--surface-1); border:1px solid var(--border); border-radius:var(--radius-lg); padding:20px; }

/* ══════════════════════════════════════
   KEYBOARD HINTS
   ══════════════════════════════════════ */

.kbd {
  display:inline-flex; align-items:center; justify-content:center;
  padding:1px 5px; font-size:0.6rem; font-weight:500;
  font-family:'Geist Mono', monospace;
  background:var(--surface-3); border:1px solid var(--border);
  border-radius:4px; color:var(--text-faint); min-width:18px;
}

/* ══════════════════════════════════════
   RIPPLE EFFECT
   ══════════════════════════════════════ */

.ripple { position:relative; overflow:hidden; }
.ripple-wave {
  position:absolute; border-radius:50%;
  background:rgba(255,255,255,0.08);
  transform:scale(0); animation:ripple 0.5s linear;
  pointer-events:none;
}

/* ══════════════════════════════════════
   ONBOARDING
   ══════════════════════════════════════ */

.onboarding-card {
  background:var(--surface-1); border:1px solid rgba(109,92,255,0.15);
  border-radius:var(--radius-xl); padding:20px;
}
.onboarding-check {
  width:22px; height:22px; border-radius:50%; display:flex; align-items:center; justify-content:center;
  border:1.5px solid var(--border); transition:all 0.2s; flex-shrink:0;
}
.onboarding-check.done { background:var(--success); border-color:var(--success); }

/* ══════════════════════════════════════
   MOBILE FULLSCREEN PRACTICE
   ══════════════════════════════════════ */

@media (max-width:768px) {
  body.practice-fullscreen nav,
  body.practice-fullscreen .mobile-bottom-nav,
  body.practice-fullscreen #question-nav-area,
  body.practice-fullscreen #previous-answer,
  body.practice-fullscreen details { display:none!important; }
  body.practice-fullscreen { padding-bottom:0!important; }
  body.practice-fullscreen #practice-area { border-radius:0!important; border:none!important; }
  body.practice-fullscreen #controls-area { padding-bottom:100px; }
  body.practice-fullscreen #question-text { font-size:1.15rem!important; line-height:1.75!important; }
}

/* ══════════════════════════════════════
   UTILITIES
   ══════════════════════════════════════ */

.line-clamp-2 { display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.tabular-nums { font-variant-numeric:tabular-nums; }
.font-mono { font-family:'Geist Mono', ui-monospace, monospace; }
.tracking-tight { letter-spacing:-0.02em; }
.gradient-text { background:linear-gradient(135deg, var(--accent), var(--violet)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }

*:focus-visible { outline:2px solid var(--accent); outline-offset:2px; border-radius:4px; }

#app-root { min-height:100vh; position:relative; z-index:1; }
#app-root > * { animation:fadeIn 0.2s ease-out; }

/* ══════════════════════════════════════
   RESPONSIVE
   ══════════════════════════════════════ */

@media (max-width:640px) {
  .text-4xl{font-size:1.5rem} .text-5xl{font-size:2rem} .text-3xl{font-size:1.35rem}
  .py-20{padding-top:2.5rem;padding-bottom:2.5rem} .py-16{padding-top:2rem;padding-bottom:2rem}
  .p-6{padding:1rem} .p-8{padding:1.25rem}
  #action-buttons{flex-direction:column}
  #action-buttons button,#action-buttons a{width:100%;justify-content:center}
  button,a,select{min-height:44px}
}

html,body { overflow-x:hidden; max-width:100vw; }

@media print { nav,#action-buttons,button,audio,canvas,details,.mobile-bottom-nav{display:none!important} }

@supports (-webkit-overflow-scrolling: touch) {
  .overflow-y-auto { -webkit-overflow-scrolling:touch; }
}

/* Audio player */
audio { border-radius:var(--radius); }
